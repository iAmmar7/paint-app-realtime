[{"/home/vend/VSCode/paint-app-realtime/client/src/index.jsx":"1","/home/vend/VSCode/paint-app-realtime/client/src/App.jsx":"2","/home/vend/VSCode/paint-app-realtime/client/src/hooks/usePainter.js":"3","/home/vend/VSCode/paint-app-realtime/client/src/components/Canvas.jsx":"4","/home/vend/VSCode/paint-app-realtime/client/src/components/Toolbar.jsx":"5","/home/vend/VSCode/paint-app-realtime/client/src/components/BrushPreview.jsx":"6","/home/vend/VSCode/paint-app-realtime/client/src/constants/index.js":"7","/home/vend/VSCode/paint-app-realtime/client/src/components/CanvasV2.jsx":"8","/home/vend/VSCode/paint-app-realtime/client/src/utils/functions.js":"9","/home/vend/VSCode/paint-app-realtime/client/src/hooks/useHistory.js":"10","/home/vend/VSCode/paint-app-realtime/client/src/components/ToolbarV2.jsx":"11","/home/vend/VSCode/paint-app-realtime/client/src/components/ActionButton.jsx":"12"},{"size":244,"mtime":1636891781813,"results":"13","hashOfConfig":"14"},{"size":1850,"mtime":1637089445835,"results":"15","hashOfConfig":"14"},{"size":6907,"mtime":1637079010577,"results":"16","hashOfConfig":"14"},{"size":1487,"mtime":1637078721779,"results":"17","hashOfConfig":"14"},{"size":5965,"mtime":1637344949561,"results":"18","hashOfConfig":"14"},{"size":499,"mtime":1636893967372,"results":"19","hashOfConfig":"14"},{"size":67,"mtime":1636897361329,"results":"20","hashOfConfig":"14"},{"size":8371,"mtime":1637344721166,"results":"21","hashOfConfig":"14"},{"size":4825,"mtime":1637088227873,"results":"22","hashOfConfig":"14"},{"size":844,"mtime":1637088122524,"results":"23","hashOfConfig":"14"},{"size":1139,"mtime":1637088465809,"results":"24","hashOfConfig":"14"},{"size":383,"mtime":1637344733294,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"cbn8uh",{"filePath":"29","messages":"30","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"28"},{"filePath":"32","messages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34","usedDeprecatedRules":"28"},{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"39","messages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"41","messages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"43","messages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"47","messages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"49","messages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/vend/VSCode/paint-app-realtime/client/src/index.jsx",[],["53","54"],"/home/vend/VSCode/paint-app-realtime/client/src/App.jsx",["55","56","57","58","59"],"import { useState, useEffect, useCallback } from 'react';\nimport socketClient from 'socket.io-client';\n\nimport Canvas from './components/Canvas';\nimport CanvasV2 from './components/CanvasV2';\nimport Toolbar from './components/Toolbar';\nimport usePainter from './hooks/usePainter';\n\nconst URL =\n  process.env.NODE_ENV === 'production' ? process.env.REACT_APP_PROD_SERVER_URL : process.env.REACT_APP_DEV_SERVER_URL;\nconst socket = socketClient(URL);\n\nconst App = () => {\n  const [dateUrl, setDataUrl] = useState('#');\n  const [{ canvas, canvasToRef, ctx, ...state }, { init, ...api }] = usePainter(socket);\n\n  useEffect(() => {\n    init();\n  }, [init]);\n\n  const onCanvasData = () => {\n    socket.on('canvas-data', (data) => {\n      const image = new Image();\n      const canvasCtx = canvas.current.getContext('2d');\n      image.onload = () => canvasCtx.drawImage(image, 0, 0);\n      image.src = data.image;\n    });\n  };\n\n  const emitCanvasData = () => {\n    const image = canvas.current.toDataURL('image/png');\n    socket.emit('canvas-data', { image });\n  };\n\n  const handleDownload = useCallback(() => {\n    if (!canvas || !canvas.current) return;\n\n    setDataUrl(canvas.current.toDataURL('image/png'));\n  }, [canvas]);\n\n  const handleClear = useCallback(() => {\n    if (!ctx || !ctx.current || !canvas || !canvas.current) {\n      return;\n    }\n    ctx.current.clearRect(0, 0, canvas.current.width, canvas.current.height);\n  }, [canvas, ctx]);\n\n  const toolbarProps = { ...state, ...api, dateUrl, handleDownload, handleClear };\n\n  return (\n    <>\n      {/* <Toolbar {...toolbarProps} /> */}\n      {/* <Canvas\n        width={state.currentWidth}\n        canvasRef={canvas}\n        canvasToRef={canvasToRef}\n        onCanvasData={onCanvasData}\n        emitCanvasData={emitCanvasData}\n      /> */}\n      <CanvasV2 />\n    </>\n  );\n};\n\nexport default App;\n","/home/vend/VSCode/paint-app-realtime/client/src/hooks/usePainter.js",["60","61","62"],"import { useCallback, useRef, useState, useEffect } from 'react';\n\nimport constants from '../constants';\n\nconst usePainter = (socket) => {\n  const canvas = useRef();\n  const [isRegularMode, setIsRegularMode] = useState(true);\n  const [isLineMode, setIsLineMode] = useState(false);\n  const [isAutoWidth, setIsAutoWidth] = useState(false);\n  const [isEraser, setIsEraser] = useState(false);\n  const [currentColor, setCurrentColor] = useState('#000000');\n  const [currentWidth, setCurrentWidth] = useState(constants.brushSize);\n\n  const autoWidth = useRef(false);\n  const selectedSaturation = useRef(100);\n  const selectedLightness = useRef(50);\n  const selectedColor = useRef('#000000');\n  const selectedLineWidth = useRef(constants.brushSize);\n  const lastX = useRef(0);\n  const lastY = useRef(0);\n  const hue = useRef(0);\n  const isDrawing = useRef(false);\n  const direction = useRef(true);\n  const isRegularPaintMode = useRef(true);\n  const isEraserMode = useRef(false);\n\n  const ctx = useRef(canvas?.current?.getContext('2d'));\n\n  // useEffect(() => {\n  //   socket.on('canvas-data', (data) => {\n  //     const image = new Image();\n  //     const canvasCtx = canvas.current.getContext('2d');\n  //     image.onload = () => canvasCtx.drawImage(image, 0, 0);\n  //     image.src = data.image;\n  //   });\n  // }, [socket]);\n\n  const drawOnCanvas = useCallback((event) => {\n    if (!ctx || !ctx.current) {\n      return;\n    }\n    ctx.current.beginPath();\n    ctx.current.moveTo(lastX.current, lastY.current);\n    ctx.current.lineTo(event.offsetX, event.offsetY);\n    ctx.current.stroke();\n\n    [lastX.current, lastY.current] = [event.offsetX, event.offsetY];\n  }, []);\n\n  const drawLine = useCallback((event) => {\n    if (!ctx || !ctx.current) {\n      return;\n    }\n\n    // Clear previous line\n    ctx.current.clearRect(0, 0, canvas.current.width, canvas.current.height);\n\n    // Draw new line\n    ctx.current.beginPath();\n    ctx.current.moveTo(lastX.current, lastY.current);\n    ctx.current.lineTo(event.offsetX, event.offsetY);\n    ctx.current.stroke();\n  }, []);\n\n  const handleMouseDown = useCallback((e) => {\n    isDrawing.current = true;\n    [lastX.current, lastY.current] = [e.offsetX, e.offsetY];\n  }, []);\n\n  const dynamicLineWidth = useCallback(() => {\n    if (!ctx || !ctx.current) {\n      return;\n    }\n    if (ctx.current.lineWidth > 90 || ctx.current.lineWidth < 10) {\n      direction.current = !direction.current;\n    }\n    direction.current ? ctx.current.lineWidth++ : ctx.current.lineWidth--;\n    setCurrentWidth(ctx.current.lineWidth);\n  }, []);\n\n  const drawNormal = useCallback(\n    (e) => {\n      if (!isDrawing.current || !ctx.current) return;\n\n      if (isRegularPaintMode.current || isEraserMode.current) {\n        ctx.current.strokeStyle = selectedColor.current;\n\n        setCurrentColor(selectedColor.current);\n\n        autoWidth.current && !isEraserMode.current\n          ? dynamicLineWidth()\n          : (ctx.current.lineWidth = selectedLineWidth.current);\n\n        isEraserMode.current\n          ? (ctx.current.globalCompositeOperation = 'destination-out')\n          : (ctx.current.globalCompositeOperation = 'source-over');\n      } else {\n        setCurrentColor(`hsl(${hue.current},${selectedSaturation.current}%,${selectedLightness.current}%)`);\n        ctx.current.strokeStyle = `hsl(${hue.current},${selectedSaturation.current}%,${selectedLightness.current}%)`;\n        ctx.current.globalCompositeOperation = 'source-over';\n\n        hue.current++;\n\n        if (hue.current >= 360) hue.current = 0;\n\n        autoWidth.current ? dynamicLineWidth() : (ctx.current.lineWidth = selectedLineWidth.current);\n      }\n\n      if (isLineMode) {\n        drawLine(e);\n      } else {\n        drawOnCanvas(e);\n      }\n    },\n    [isLineMode, dynamicLineWidth, drawLine, drawOnCanvas]\n  );\n\n  const stopDrawing = useCallback(() => {\n    isDrawing.current = false;\n\n    // const image = canvas.current.toDataURL('image/png');\n    // socket.emit('canvas-data', { image });\n  }, [socket]);\n\n  const init = useCallback(() => {\n    ctx.current = canvas?.current?.getContext('2d');\n    if (canvas && canvas.current && ctx && ctx.current) {\n      canvas.current.addEventListener('mousedown', handleMouseDown);\n      canvas.current.addEventListener('mousemove', drawNormal);\n      canvas.current.addEventListener('mouseup', stopDrawing);\n      canvas.current.addEventListener('mouseout', stopDrawing);\n\n      canvas.current.width = window.innerWidth - 196;\n      canvas.current.height = window.innerHeight;\n\n      ctx.current.strokeStyle = '#000';\n      ctx.current.lineJoin = 'round';\n      ctx.current.lineCap = 'round';\n      ctx.current.lineWidth = 10;\n    }\n  }, [drawNormal, handleMouseDown, stopDrawing]);\n\n  const handleRegularMode = useCallback(() => {\n    setIsRegularMode(true);\n    isEraserMode.current = false;\n    setIsEraser(false);\n    isRegularPaintMode.current = true;\n  }, []);\n\n  const handleSpecialMode = useCallback(() => {\n    setIsRegularMode(false);\n    isEraserMode.current = false;\n    setIsEraser(false);\n    isRegularPaintMode.current = false;\n  }, []);\n\n  const handleColor = (e) => {\n    setCurrentColor(e.currentTarget.value);\n    selectedColor.current = e.currentTarget.value;\n  };\n\n  const handleWidth = (e) => {\n    setCurrentWidth(e.currentTarget.value);\n    selectedLineWidth.current = e.currentTarget.value;\n  };\n\n  // const clearCanvas = useCallback(() => {\n  //   if (!ctx || !ctx.current || !canvas || !canvas.current) {\n  //     return;\n  //   }\n  //   ctx.current.clearRect(0, 0, canvas.current.width, canvas.current.height);\n  // }, []);\n\n  const handleEraserMode = (e) => {\n    autoWidth.current = false;\n    setIsAutoWidth(false);\n    setIsRegularMode(true);\n    isEraserMode.current = true;\n    setIsEraser(true);\n  };\n\n  const setCurrentSaturation = (e) => {\n    setCurrentColor(`hsl(${hue.current},${e.currentTarget.value}%,${selectedLightness.current}%)`);\n    selectedSaturation.current = e.currentTarget.value;\n  };\n\n  const setCurrentLightness = (e) => {\n    setCurrentColor(`hsl(${hue.current},${selectedSaturation.current}%,${e.currentTarget.value}%)`);\n    selectedLightness.current = e.currentTarget.value;\n  };\n\n  const setAutoWidth = (e) => {\n    autoWidth.current = e.currentTarget.checked;\n    setIsAutoWidth(e.currentTarget.checked);\n\n    if (!e.currentTarget.checked) {\n      setCurrentWidth(selectedLineWidth.current);\n    } else {\n      setCurrentWidth(ctx?.current?.lineWidth ?? selectedLineWidth.current);\n    }\n  };\n\n  return [\n    {\n      canvas,\n      ctx,\n      currentWidth,\n      currentColor,\n      isRegularMode,\n      isAutoWidth,\n      isEraser,\n    },\n    {\n      init,\n      handleRegularMode,\n      handleSpecialMode,\n      handleColor,\n      handleWidth,\n      // handleClear,\n      handleEraserMode,\n      setAutoWidth,\n      setCurrentSaturation,\n      setCurrentLightness,\n    },\n  ];\n};\n\nexport default usePainter;\n","/home/vend/VSCode/paint-app-realtime/client/src/components/Canvas.jsx",[],"/home/vend/VSCode/paint-app-realtime/client/src/components/Toolbar.jsx",["63","64","65"],"/home/vend/VSCode/paint-app-realtime/client/src/components/BrushPreview.jsx",[],"/home/vend/VSCode/paint-app-realtime/client/src/constants/index.js",[],"/home/vend/VSCode/paint-app-realtime/client/src/components/CanvasV2.jsx",[],"/home/vend/VSCode/paint-app-realtime/client/src/utils/functions.js",[],"/home/vend/VSCode/paint-app-realtime/client/src/hooks/useHistory.js",[],"/home/vend/VSCode/paint-app-realtime/client/src/components/ToolbarV2.jsx",[],"/home/vend/VSCode/paint-app-realtime/client/src/components/ActionButton.jsx",[],{"ruleId":"66","replacedBy":"67"},{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","severity":1,"message":"71","line":4,"column":8,"nodeType":"72","messageId":"73","endLine":4,"endColumn":14},{"ruleId":"70","severity":1,"message":"74","line":6,"column":8,"nodeType":"72","messageId":"73","endLine":6,"endColumn":15},{"ruleId":"70","severity":1,"message":"75","line":21,"column":9,"nodeType":"72","messageId":"73","endLine":21,"endColumn":21},{"ruleId":"70","severity":1,"message":"76","line":30,"column":9,"nodeType":"72","messageId":"73","endLine":30,"endColumn":23},{"ruleId":"70","severity":1,"message":"77","line":48,"column":9,"nodeType":"72","messageId":"73","endLine":48,"endColumn":21},{"ruleId":"70","severity":1,"message":"78","line":1,"column":41,"nodeType":"72","messageId":"73","endLine":1,"endColumn":50},{"ruleId":"70","severity":1,"message":"79","line":8,"column":22,"nodeType":"72","messageId":"73","endLine":8,"endColumn":35},{"ruleId":"80","severity":1,"message":"81","line":123,"column":6,"nodeType":"82","endLine":123,"endColumn":14,"suggestions":"83"},{"ruleId":"70","severity":1,"message":"84","line":3,"column":3,"nodeType":"72","messageId":"73","endLine":3,"endColumn":15},{"ruleId":"70","severity":1,"message":"85","line":4,"column":3,"nodeType":"72","messageId":"73","endLine":4,"endColumn":11},{"ruleId":"70","severity":1,"message":"86","line":5,"column":3,"nodeType":"72","messageId":"73","endLine":5,"endColumn":10},"no-native-reassign",["87"],"no-negated-in-lhs",["88"],"no-unused-vars","'Canvas' is defined but never used.","Identifier","unusedVar","'Toolbar' is defined but never used.","'onCanvasData' is assigned a value but never used.","'emitCanvasData' is assigned a value but never used.","'toolbarProps' is assigned a value but never used.","'useEffect' is defined but never used.","'setIsLineMode' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useCallback has an unnecessary dependency: 'socket'. Either exclude it or remove the dependency array.","ArrayExpression",["89"],"'faArrowsAltH' is defined but never used.","'faEraser' is defined but never used.","'faMagic' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"90","fix":"91"},"Update the dependencies array to be: []",{"range":"92","text":"93"},[3991,3999],"[]"]